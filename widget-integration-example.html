<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example: NLWeb Widget Integration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .code-block {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .highlight {
            background: #ffffcc;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>üîß H∆∞·ªõng d·∫´n t√≠ch h·ª£p NLWeb Widget v√†o WordPress</h1>
    
    <div class="section">
        <h2>üìã B∆∞·ªõc 1: Th√™m v√†o Header ho·∫∑c Footer WordPress</h2>
        <p>Th√™m ƒëo·∫°n code sau v√†o file <strong>header.php</strong> ho·∫∑c <strong>footer.php</strong> c·ªßa theme WordPress:</p>
        
        <div class="code-block">
<pre>&lt;!-- C·∫•u h√¨nh NLWeb Widget --&gt;
&lt;script&gt;
window.NLWEB_CONFIG = {
    apiBaseUrl: '<span class="highlight">https://your-deployed-app.railway.app</span>', // ‚ö†Ô∏è Thay b·∫±ng URL th·ª±c t·∫ø
    title: 'Tr·ª£ l√Ω AI',
    welcomeMessage: 'üëã Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?'
};
&lt;/script&gt;

&lt;!-- Load NLWeb Widget --&gt;
&lt;script src="<span class="highlight">https://your-deployed-app.railway.app</span>/static/widget.js"&gt;&lt;/script&gt;</pre>
        </div>
    </div>

    <div class="section">
        <h2>üéØ B∆∞·ªõc 2: S·ª≠ d·ª•ng WordPress Plugin (Khuy·∫øn ngh·ªã)</h2>
        <p>T·∫°o plugin WordPress ƒë·ªÉ d·ªÖ qu·∫£n l√Ω:</p>
        
        <h3>T·∫°o file: wp-content/plugins/nlweb-widget/nlweb-widget.php</h3>
        <div class="code-block">
<pre>&lt;?php
/**
 * Plugin Name: NLWeb Chat Widget
 * Description: T√≠ch h·ª£p chat widget NLWeb v√†o WordPress
 * Version: 1.0
 * Author: Your Name
 */

// Prevent direct access
if (!defined('ABSPATH')) {
    exit;
}

class NLWebWidget {
    
    public function __construct() {
        add_action('wp_footer', array($this, 'add_widget_script'));
        add_action('admin_menu', array($this, 'add_admin_menu'));
        add_action('admin_init', array($this, 'init_settings'));
    }
    
    public function add_widget_script() {
        $api_url = get_option('nlweb_api_url', 'https://your-app.railway.app');
        $title = get_option('nlweb_title', 'Tr·ª£ l√Ω AI');
        $welcome = get_option('nlweb_welcome', 'üëã Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?');
        
        echo "&lt;script&gt;
        window.NLWEB_CONFIG = {
            apiBaseUrl: '{$api_url}',
            title: '{$title}',
            welcomeMessage: '{$welcome}'
        };
        &lt;/script&gt;";
        
        echo "&lt;script src='{$api_url}/static/widget.js'&gt;&lt;/script&gt;";
    }
    
    public function add_admin_menu() {
        add_options_page(
            'NLWeb Widget Settings',
            'NLWeb Widget', 
            'manage_options',
            'nlweb-widget',
            array($this, 'admin_page')
        );
    }
    
    public function init_settings() {
        register_setting('nlweb_settings', 'nlweb_api_url');
        register_setting('nlweb_settings', 'nlweb_title');  
        register_setting('nlweb_settings', 'nlweb_welcome');
    }
    
    public function admin_page() {
        ?&gt;
        &lt;div class="wrap"&gt;
            &lt;h1&gt;NLWeb Widget Settings&lt;/h1&gt;
            &lt;form method="post" action="options.php"&gt;
                &lt;?php settings_fields('nlweb_settings'); ?&gt;
                &lt;table class="form-table"&gt;
                    &lt;tr&gt;
                        &lt;th scope="row"&gt;API URL&lt;/th&gt;
                        &lt;td&gt;&lt;input type="url" name="nlweb_api_url" value="&lt;?php echo esc_attr(get_option('nlweb_api_url')); ?&gt;" class="regular-text" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;th scope="row"&gt;Widget Title&lt;/th&gt;
                        &lt;td&gt;&lt;input type="text" name="nlweb_title" value="&lt;?php echo esc_attr(get_option('nlweb_title')); ?&gt;" class="regular-text" /&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;th scope="row"&gt;Welcome Message&lt;/th&gt;
                        &lt;td&gt;&lt;textarea name="nlweb_welcome" class="regular-text"&gt;&lt;?php echo esc_textarea(get_option('nlweb_welcome')); ?&gt;&lt;/textarea&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/table&gt;
                &lt;?php submit_button(); ?&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        &lt;?php
    }
}

new NLWebWidget();
?&gt;</pre>
        </div>
    </div>

    <div class="section">
        <h2>‚öôÔ∏è B∆∞·ªõc 3: K√≠ch ho·∫°t Plugin</h2>
        <ol>
            <li>T·∫£i file plugin l√™n th∆∞ m·ª•c <code>wp-content/plugins/nlweb-widget/</code></li>
            <li>V√†o WordPress Admin ‚Üí Plugins ‚Üí Activate "NLWeb Chat Widget"</li>
            <li>V√†o Settings ‚Üí NLWeb Widget ƒë·ªÉ c·∫•u h√¨nh URL API</li>
        </ol>
    </div>

    <div class="section">
        <h2>üß™ B∆∞·ªõc 4: Test Widget</h2>
        <p>Sau khi setup xong:</p>
        <ul>
            <li>Truy c·∫≠p trang web WordPress</li>
            <li>Ki·ªÉm tra icon chat ·ªü g√≥c ph·∫£i d∆∞·ªõi</li>
            <li>Click ƒë·ªÉ m·ªü widget v√† test chat</li>
            <li>Ki·ªÉm tra Console browser n·∫øu c√≥ l·ªói</li>
        </ul>
    </div>

    <div class="section">
        <h2>üö® Troubleshooting</h2>
        <h3>Widget kh√¥ng hi·ªÉn th·ªã:</h3>
        <ul>
            <li>Ki·ªÉm tra URL API c√≥ ƒë√∫ng kh√¥ng</li>
            <li>Ki·ªÉm tra server NLWeb c√≥ online kh√¥ng</li>
            <li>Xem Console browser ƒë·ªÉ check l·ªói JavaScript</li>
        </ul>
        
        <h3>L·ªói CORS:</h3>
        <ul>
            <li>Server NLWeb ƒë√£ c√≥ c·∫•u h√¨nh CORS s·∫µn</li>
            <li>N·∫øu v·∫´n l·ªói, ki·ªÉm tra domain WordPress c√≥ ƒë∆∞·ª£c whitelist</li>
        </ul>
        
        <h3>Chat kh√¥ng ho·∫°t ƒë·ªông:</h3>
        <ul>
            <li>Ki·ªÉm tra OPENAI_API_KEY c√≥ ƒë∆∞·ª£c set ƒë√∫ng</li>
            <li>Ki·ªÉm tra logs server ƒë·ªÉ debug</li>
        </ul>
    </div>

    <div class="section">
        <h2>üîó API Testing</h2>
        <p>Test API tr·ª±c ti·∫øp b·∫±ng URL:</p>
        <div class="code-block">
            <code>https://your-app.railway.app/ask?query=hello&site=all&generate_mode=list</code>
        </div>
    </div>

    <!-- ƒê·ªÉ demo, b·∫°n c√≥ th·ªÉ uncomment d√≤ng d∆∞·ªõi ƒë·ªÉ test widget ngay tr√™n trang n√†y -->
    <!--
    <script>
    window.NLWEB_CONFIG = {
        apiBaseUrl: 'http://localhost:8000', // Change to your deployed URL
        title: 'Demo Assistant',
        welcomeMessage: 'üëã This is a demo widget!'
    };
    </script>
    <script src="http://localhost:8000/static/widget.js"></script>
    -->

</body>
</html>
